{% extends "base.html" %}
{% load static %}
{% block title %}Scheduler | Schedule System{% endblock %}

{% block content %}
<div class="page-header">
  <div>
    <h1 class="page-title">Scheduler</h1>
    <p class="page-subtitle">Select the week ending (Saturday) for this schedule.</p>
  </div>
</div>

<section class="card week-ending-card">
  <div class="card-header">
    <h2 class="card-title">Choose Week Ending</h2>
  </div>

  <form method="post" class="week-form">
    {% csrf_token %}

    <div class="week-options">
      {% for date in week_dates %}
      <label class="week-option">
        <input
          type="radio"
          name="week_ending"
          value="{{ date }}"
          {% if forloop.first %}checked{% endif %}
        >
        <span class="week-label-text">{{ date }}</span>
      </label>
      {% endfor %}
    </div>

    {% if users %}
      {% for u in users %}
        <input type="hidden" name="user_ids" value="{{ u.id }}">
      {% endfor %}
    {% endif %}

    <div class="form-actions">
      <button type="submit" class="btn-primary">Confirm Week</button>
    </div>
  </form>

  {% if selected_week %}
  <div class="alert info-alert">
    Selected week ending: <strong>{{ selected_week }}</strong>
  </div>
  {% endif %}

  {% if error %}
  <div class="alert error-alert">
    {{ error }}
  </div>
  {% endif %}
</section>

<script src="{% static 'scripts/select_week_ending.js' %}"></script>
{% endblock %}